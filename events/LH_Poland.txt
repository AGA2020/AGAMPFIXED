###########################
# Little Hungary Events
###########################

add_namespace = LH_POL

country_event = { #Hungary offers guarantee
	id = LH_POL.1
	title = LH_POL.1.t
	desc = LH_POL.1.desc
	picture = GFX_report_event_hitler_handshake

	is_triggered_only = yes
	
	fire_only_once = yes

	
	option = {
		name = LH_POL.1.a
		ai_chance = {
			base = 40
			modifier = {
				has_opinion = { target = HUN value > 30} 
				factor = 2
			}
			modifier = {
				has_government = neutrality
				factor = 2
			}
			modifier = {
				GER = {
					has_completed_focus = GER_demand_memel
				}
				factor = 2
			}
			modifier = {
				POL = {
					is_neighbor_of = HUN
				}
				factor = 2
			}
			
		}
		
		
		HUN = {country_event = LH.56}
	}
	
	option = {
		name = LH_POL.1.b
		ai_chance = {
			base = 45
			modifier = {
				has_opinion = { target = HUN value < 20} 
				factor = 2
			}
			modifier = {
				has_government = fascism
				factor = 2
			}
			modifier = {
				NOT = {
					POL = {
						is_neighbor_of = HUN
					}
					
				}
				factor = 2
			}
		}
		HUN = {country_event = LH.57}
	}
}

country_event = { #Hungary demands Habsburg on throne
	id = LH_POL.2
	title = LH_POL.2.t
	desc = LH_POL.2.desc
	picture = GFX_report_event_lithuanian_ultimatum

	is_triggered_only = yes
	
	fire_only_once = yes

	
	option = {	# Alright
		name = LH_POL.2.a
		ai_chance = {
			base = 60
			modifier = {
				threat > 20
				factor = 2
			}
			modifier = {
				GER = {
					has_completed_focus = GER_demand_memel
				}
				factor = 2
			}
			modifier = {
				POL = {
					is_neighbor_of = HUN
				}
				factor = 2
			}
			modifier = {
				POL = {
					has_opinion = {	
						target = HUN
						value > 30
					}						
				}
				factor = 2
			}
			modifier = {
				neutrality > 0.3
				factor = 2
			}
		}
		promote_character = POL_karl_albrecht
		set_party_name = { 
			ideology = neutrality 
			long_name = POL_habsburg_party
			name = POL_habsburg_party 
		}
		mark_focus_tree_layout_dirty = yes
		if = {
			limit = {
				has_completed_focus = POL_nationalist_constitution
			}
			uncomplete_national_focus = {
				focus = POL_nationalist_constitution
				uncomplete_children = yes
			}
		}
		if = {
			limit = {
				has_completed_focus = POL_organize_the_peasants_strike
			}
			uncomplete_national_focus = {
				focus = POL_organize_the_peasants_strike
				uncomplete_children = yes
			}
		}
		if = {
			limit = {
				has_completed_focus = POL_complete_april_constitution
			}
			uncomplete_national_focus = {
				focus = POL_complete_april_constitution
				uncomplete_children = yes
			}
		}
		if = {
			limit = {
				has_completed_focus = POL_cossack_king
			}
			uncomplete_national_focus = {
				focus = POL_cossack_king
				uncomplete_children = yes
			}
		}
		if = {
			limit = {
				has_completed_focus = POL_claiming_lithuania
			}
			uncomplete_national_focus = {
				focus = POL_claiming_lithuania
				uncomplete_children = yes
			}
		}
		if = {
			limit = {
				has_completed_focus = POL_hohenzollern
			}
			uncomplete_national_focus = {
				focus = POL_hohenzollern
				uncomplete_children = yes
			}
		}
		
		unlock_national_focus = POL_assemble_the_regency_council
		unlock_national_focus = POL_fulfil_fifth_of_november
		unlock_national_focus = POL_habsburg
	}
	
	option = {
		name = LH_POL.2.b
		ai_chance = {
			base = 40
			modifier = {
				threat < 20
				factor = 2
			}
			modifier = {
				OR = {
					has_government = communism
					has_government = fascism
				}
				factor = 4
			}
			modifier = {
				neutrality < 0.3
				factor = 4
			}
		}
		set_global_flag = HUN_polish_civil_war_flag
		
		set_temp_variable = { civil_war_strength = monarchist_support }
		
		start_civil_war = {
			ideology = neutrality 
			size = var:civil_war_strength
			states = { 88 89 91 762 90 } 
		}
		
		random_country_with_original_tag = {
			original_tag_to_check = POL 
			limit = {has_full_control_of_state = 88}
			promote_character = POL_karl_albrecht
			set_party_name = { 
				ideology = neutrality 
				long_name = POL_habsburg_party
				name = POL_habsburg_party 
			}
			
			hidden_effect = {
				set_popularities = {
					democratic = 15
					neutrality = 60
					fascism = 25
					communism = 0
				}
				
				division_template = {
					name = "Habsburg Militia"
					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
						infantry = { x = 0 y = 3 }
					}
					priority = 0
				}
				random_owned_controlled_state = {
					create_unit = {
						division = "division_template = \"Habsburg Militia\" start_experience_factor = 0.4 force_equipment_variants = { infantry_equipment_0 = { owner = \"HUN\" } }"
						owner = PREV
					}
					
				}
				random_owned_controlled_state = {
					create_unit = {
						division = "division_template = \"Habsburg Militia\" start_experience_factor = 0.4 force_equipment_variants = { infantry_equipment_0 = { owner = \"HUN\" } }"
						owner = PREV
					}
					create_unit = {
						division = "division_template = \"Habsburg Militia\" start_experience_factor = 0.4 force_equipment_variants = { infantry_equipment_0 = { owner = \"HUN\" } }"
						owner = PREV
					}
				}
				random_owned_controlled_state = {
					create_unit = {
						division = "division_template = \"Habsburg Militia\" start_experience_factor = 0.4 force_equipment_variants = { infantry_equipment_0 = { owner = \"HUN\" } }"
						owner = PREV
					}
					create_unit = {
						division = "division_template = \"Habsburg Militia\" start_experience_factor = 0.4 force_equipment_variants = { infantry_equipment_0 = { owner = \"HUN\" } }"
						owner = PREV
					}
				}
			}
			
		}
		HUN = { country_event = LH_POL.3 }
		
	}
}
	
country_event = { #Hungary gets event that war started
	id = LH_POL.3
	title = LH_POL.3.t
	desc = LH_POL.3.desc
	picture = GFX_report_event_lithuanian_ultimatum

	is_triggered_only = yes
	
	fire_only_once = yes

	
	option = {	# Send Volunteers
		name = LH_POL.3.a
		add_ideas = HUN_polish_war_volunteers
		random_country = {
			limit = {
				has_country_leader = {
					name = "Karl Albrecht I"
					ruling_only = yes
				}
			}
			save_event_target_as = POLHAB
		}
		give_guarantee = event_target:POLHAB
		diplomatic_relation = {
			country = event_target:POLHAB
			relation = non_aggression_pact
			active = yes
		}
		hidden_effect = {
			set_rule = { can_send_volunteers = yes }
		}
	}
	
}
	
country_event = { #Polish civil war is over, set the focuses
	id = LH_POL.4
	title = LH_POL.4.t
	desc = LH_POL.4.desc
	picture = GFX_report_event_lithuanian_ultimatum

	is_triggered_only = no
	
	fire_only_once = yes
	
	trigger = {
		has_country_leader = {
			name = "Karl Albrecht I"
			ruling_only = yes
		} 
		has_civil_war = no 
		has_global_flag = HUN_polish_civil_war_flag
	}  
	
	option = {	# set the focuses
		name = LH_POL.4.a  
		set_cosmetic_tag = POL_KINGDOM
		mark_focus_tree_layout_dirty = yes
		if = {
			limit = {
				has_completed_focus = POL_nationalist_constitution
			}
			uncomplete_national_focus = {
				focus = POL_nationalist_constitution
				uncomplete_children = yes
			}
		}
		if = {
			limit = {
				has_completed_focus = POL_organize_the_peasants_strike
			}
			uncomplete_national_focus = {
				focus = POL_organize_the_peasants_strike
				uncomplete_children = yes
			}
		}
		if = {
			limit = {
				has_completed_focus = POL_complete_april_constitution
			}
			uncomplete_national_focus = {
				focus = POL_complete_april_constitution
				uncomplete_children = yes
			}
		}
		if = {
			limit = {
				has_completed_focus = POL_cossack_king
			}
			uncomplete_national_focus = {
				focus = POL_cossack_king
				uncomplete_children = yes
			}
		}
		if = {
			limit = {
				has_completed_focus = POL_claiming_lithuania
			}
			uncomplete_national_focus = {
				focus = POL_claiming_lithuania
				uncomplete_children = yes
			}
		}
		if = {
			limit = {
				has_completed_focus = POL_hohenzollern
			}
			uncomplete_national_focus = {
				focus = POL_hohenzollern
				uncomplete_children = yes
			}
		}
		
		
		
		unlock_national_focus = POL_assemble_the_regency_council
		unlock_national_focus = POL_fulfil_fifth_of_november
		unlock_national_focus = POL_habsburg
	}
	
}
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	


